
-- 회원 정보
drop table MEMBER cascade constraints;

create table member(
    id varchar2(100) primary key,
    mtype varchar2(100) not null,
    name varchar2(100) not null,
    password varchar2(100) not null,
    nickname varchar2(100) not null,
    birth date,
    mphone varchar2(100),
    email varchar2(100) not null,
    maddr1 varchar2(500),
    maddr2 varchar2(100)
);

insert into member(id,mtype,name,password,nickname,birth,mphone,email,maddr1,maddr2)
		values('hong','member','홍길동','qwerty1!','홍시','1990-09-09','01090909090','hong@fitquest.com','서울 중구 북창동 136','1층');
insert into member(id,mtype,name,password,nickname,birth,mphone,email,maddr1,maddr2)
		values('kim','trainer','홍길동','1234','홍시','1991-09-09','01090909090','kim@fitquest.com','서울 중구 북창동 136','2층');

select * from MEMBER;
commit;

 
-- 게시판
drop table BOARD cascade constraints;
CREATE TABLE BOARD (
   Bnum   number   primary key,
   ID varchar2 references MEMBER(ID) on delete cascade, -- 회원아이디 
   btype   varchar2   NOT NULL,
   bcategory   varchar2   NOT NULL,
   Bsubject   varchar2   NOT NULL,
   Bregdate   date   NOT NULL   DEFAULT sysdate,
   Breadcount   number   NOT NULL   DEFAULT 0,
   Bref   number,
   Brestep   number,
   Brelevel   number,
   Bcontent   varchar2   NOT NULL,
   Bimage   varchar2
);

select * from BOARD;
commit;


-- 책갈피
drop table SCRAP cascade constraints;
CREATE TABLE SCRAP (
   Snum number   primary key, --책갈피 고유번호
   ID varchar2 references MEMBER(ID) on delete cascade, -- 회원아이디 
   Bnum number   NOT NULL -- 게시판번호
);

select * from SCRAP;
commit;

-- 댓글
drop table COMMENT cascade constraints;
CREATE TABLE COMMENT (
   cnum number   primary key, --댓글 고유번호
   Bnum varchar2 references BOARD(Bnum) on delete cascade, -- 게시판 번호
   Bnum number   NOT NULL, --게시판 고유번호
   ID varchar2 references MEMBER(ID) on delete cascade, -- 회원아이디 
   cregdate date NOT NULL DEFAULT sysdate,
   cref   number   NOT NULL,
   crestep   number   NOT NULL,
   crelevel   number   NOT NULL,
   Ccontent   varchar2   NOT NULL
);

select * from COMMENT;
commit;







-- 트레이너 
drop table trainer cascade constraints;
CREATE TABLE trainer (
   ID varchar2(30) references MEMBER(ID) on delete cascade primary key, -- 회원아이디 
   gnum   number NOT NULL, --헬스장 번호
   activity   varchar2(30)   NOT NULL, --운동 카테고리
   purpose   varchar2(30)   NOT NULL, --운동 목적
   intro   varchar2(500)   NOT NULL, -- 소개 내용
   exp   varchar2(50)   NOT NULL, --경력
   timage   varchar2(50) --트레이너 사진
);

insert into trainer values('kim', 1, 'PT', '체중', 'hi~','개인 pt 30년', '.');
select * from trainer;
commit;


-- 헬스장 
drop sequence gseq;
create sequence gseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;  
  
drop table gym cascade constraints;
CREATE TABLE gym (
   gnum   number   primary key, --헬스장 번호
   gname   varchar2(40)   NOT NULL, --헬스장명
   gaddr1   varchar2(60)   NOT NULL, --헬스장 주소1
   gaddr2   varchar2(60)   NOT NULL, --헬스장 주소2
   gphone   varchar2(60)   NOT NULL --헬스장 전화번호
);

select * from gym;
commit;


-- 상품
drop sequence pseq;
create sequence pseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
drop table product cascade constraints;
CREATE TABLE product (
   pnum   number   primary key, --상품번호
   ID varchar2(30) references MEMBER(ID) on delete cascade, -- 회원아이디 
   price   number   NOT NULL, --상품 가격
   months   number   NOT NULL, --회원권 사용기간
   pcount   number   NOT NULL, --회원권 사용갯수
   people   number   NOT NULL, --수업 참여 회원 갯수
   ptype   varchar2(15)   NOT NULL, --개인, 그룹 수업 구분 "group"/"ind"
   ptime   number   NOT NULL --수업 시간길이
);

select * from product;
commit;


-- 주문
drop sequence oseq;
create sequence oseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
drop table order cascade constraints;
CREATE TABLE order (
   onum   number   primary key, --주문번호
   ID   varchar2(30)   NOT NULL, --주문한 회원 아이디
   odate   date   NOT NULL, --주문 날짜
);

select * from order;
commit;


-- 주문내역
drop sequence odseq;
create sequence odseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
drop table orderdetail cascade constraints;
CREATE TABLE orderdetail (
   odnum   number   primary key, --주문내역 번호
   pnum   number   NOT NULL, --상품 번호
   onum   number   NOT NULL --주문번호
);

select * from orderdetail;
commit;







-- PT사용권
drop sequence useq;
create sequence useq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
drop table usage cascade constraints;
CREATE TABLE usage (
   unum   number   primary key, --사용권번호
   pnum   number   NOT NULL, --상품번호
   tid(30) varchar2 references TRAINER(ID) on delete cascade, --트레이너 아이디
   mid(30) varchar2 references MEMBER(ID) on delete cascade, -- 회원아이디 
   usage   number   NOT NULL --남은 횟수
);

select * from usage;
commit;



-- pt 예약
drop sequence reseq;
create sequence reseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
drop table reservation cascade constraints;
CREATE TABLE reservation (
   rnum   number   primary key, --예약번호
   ID varchar2(30) references MEMBER(ID) on delete cascade, -- 회원아이디 
   onum   number   NOT NULL, --주문번호
   unum   number   NOT NULL,--사용권번호
   rdate   date   NULL, --예약 날짜
   rtime varchar2(15) NULL --예약 시간 "00:00am"
);

select * from reservation;
commit;







-- 회원별 운동정보
drop sequence hseq;
create sequence hseq
  increment by 1
  start with 1
  minvalue 1
  nocache;

drop table health cascade constraints;
CREATE TABLE health (
   hnum   number   primary key, -- 운동정보 번호
   ID varchar2(100) references MEMBER(ID) on delete cascade, -- 회원아이디 
   hdate   date   NOT NULL, --운동일자
   hname   varchar2(30)   NOT NULL, --운동명
   starttime   date, --시작시간
   endtime   date --종료시간
);

select * from health;
commit;


-- 회원별 식단 정보
drop sequence nseq;
create sequence nseq
  increment by 1
  start with 1
  minvalue 1
  nocache;
  
drop table nutrition cascade constraints;
CREATE TABLE nutrition (
   nnum   number   primary key, --식단번호
   ID varchar2(100) references MEMBER(ID) on delete cascade, -- 회원아이디 
   fnum   number   NOT NULL, --음식번호
   mealtype   VARCHAR(10), -- 아침 점심 저녁 기타
   nutritiondate   date --식사일자
);

select * from nutrition;
commit;


-- 음식정보
drop sequence fseq;
create sequence fseq
  increment by 1
  start with 1
  minvalue 1
  nocache;
  
drop table food cascade constraints;
CREATE TABLE food (
   fnum   number primary key, --음식번호
   fname   varchar2(50), --음식이름
   fweight number default 0.0, -- 음식무게
   calories   number, --칼로리
   carbohydrate   number, --탄수화물
   protein   number, --단백질
   fat   number, --지방
   saturatedfat   number, --포화지방
   sodium   number --나트륨
);

select * from food;
commit;


-- 신체정보
drop sequence phseq;
create sequence phseq
  increment by 1
  start with 1
  minvalue 1
  nocache;
  
drop table physique cascade constraints;
CREATE TABLE physique (
   phnum   number   primary key, --신체번호
   ID   varchar2(100)   NOT NULL, --아이디
   height   number default 0.0, --신장(cm)
   weight   number default 0.0, --체중(kg)
   BMI   number default 0.0, --bmi
   phdate   date, --측정일
   skeletalmuscle   number default 0.0, --골격근량(kg)
   bodyfatper   number default 0.0, --체지방률(%)
   bmr   int --기초대사량(kcal)
);


select * from physique;
commit;








-- 신고 테이블
drop table Report cascade constraints;
CREATE TABLE Report (
   renum   number   primary key,
   Bnum   number   NOT NULL,
   ID varchar2 references MEMBER(ID) on delete cascade, -- 회원아이디 
   status   varchar2   NOT NULL,
   content   varchar2   NOT NULL
);

select * from Report;
commit;


--문의 테이블
drop sequence qseq;
create sequence qseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
drop table question cascade constraints;
CREATE TABLE question (
   qnum   number   primary key, --문의 번호
   ID varchar2(30) references MEMBER(ID) on delete cascade, -- 회원아이디 
   qdate   date   NOT NULL, --문의 날짜 
   qcontent   varchar2(500)   NOT NULL, --문의 내용
   qsubject   varchar2(60)   NOT NULL, --문의 제목
   qstatus   varchar2(20)  NOT NULL --문의 답변 상태 "answered" / "unanswered"
);

select * from question;
commit;


--문의 답변
drop sequence qcseq;
create sequence qcseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
drop table QComment cascade constraints;
CREATE TABLE QComment (
   qcnum   number primary key,
   qnum   number   NOT NULL,
   qcomment   varchar2(500),
   qcdate   date
);

select * from QComment;
commit;



--리뷰 테이블
drop sequence rvseq;
create sequence rvseq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
drop table review cascade constraints;
CREATE TABLE review (
	renum number primary key,
	userid varchar2(30),
	pnum number,
	trainerid varchar2(30),
	rating number,
	rcontent varchar2(500),
	rdate date default sysdate	
);
select * from review;
commit;